---
title: "initial exploration"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
```


```{r}
april_2019 <- read_csv("201904-citibike-tripdata.csv") #april 2019
july_2019 <- read_csv("201907-citibike-tripdata.csv") #july 2019
october_2019 <- read_csv("201910-citibike-tripdata.csv") #october 2019
january_2020 <- read_csv("202001-citibike-tripdata.csv") #january 2020
april_2020 <- read_csv("202004-citibike-tripdata.csv") #april 2020
july_2020 <- read_csv("202007-citibike-tripdata.csv") #july 2020
```


```{r}
mega_dataset<-full_join(april_2019, july_2019 )%>%
  full_join(october_2019)%>%
  full_join(january_2020)%>%
  full_join(april_2020) %>% 
  full_join(july_2020)
  
```

```{r}
library(lubridate)
# Add variable with only year, month, day
mega_dataset <- mega_dataset%>%
  mutate(starttime = as_datetime(starttime))%>%
 # mutate(start_time_block = floor_date(starttime, unit = "month"))%>%
  mutate(start_month = format(starttime, format="%Y/%m"))
```

to do: 

- explore the average duration of rides: how does it change over time?

- create a leaflet map

```{r}
station_id_popularity <- mega_dataset%>%
  group_by(start_month, `start station id`)%>%
  summarize(count = n())%>%
  arrange(desc(count))%>%
  mutate(popularity = ifelse(count < 1000, "Low", ifelse(count < 5000, "Moderate", "High")))
```





